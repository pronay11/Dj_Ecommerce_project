{% extends 'base.html' %}
{% load static %}
{% load my_tags %}


{% block content %}
<!-- BREADCRUMB -->
<div id="breadcrumb" class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <ul class="breadcrumb-tree">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">All Categories</a></li>
                    <li><a href="#">Accessories</a></li>
                    <li><a href="#">Headphones</a></li>
                    <li class="active">{{ comment_count.product__count }}</li>
                </ul>
            </div>
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /BREADCRUMB -->

<!-- SECTION -->
<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <!-- Product main img -->
            <div class="col-md-5 col-md-push-2">
                <div id="product-main-img">
                    {% for image in object.gallery.all %}
                    <div class="product-preview">
                        <img src="{{ image.photo.url }}" alt="">
                    </div>
                    {% endfor %}

                </div>
            </div>
            <!-- /Product main img -->

            <!-- Product thumb imgs -->
            <div class="col-md-2  col-md-pull-5">
                <div id="product-imgs">
                    {% for image in object.gallery.all %}
                    <div class="product-preview">
                        <img src="{{ image.photo.url }}" alt="">
                    </div>
                    {% endfor %}
                </div>
            </div>
            <!-- /Product thumb imgs -->

            <!-- Product details -->
            <div class="col-md-5">
                <div class="product-details">
                    <h2 class="product-name">{{ object.name }}</h2>
                    <div>
                        <div class="product-rating">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                       <a class="review-link" href="#"> {{comment_count.product__count}} Review(s) | Add your review</a>
                    </div>
                    <div>
                        <h3 class="product-price">${{ object.new_price }}
                            <del class="product-old-price">${{ object.old_price }}</del>
                        </h3>
                        {% if object.in_stock %}
                        <span class="product-available">In Stock</span>
                        {% endif %}
                    </div>
                    <p>{{ product.description }}</p>


                    <form action="{% url 'add-to-cart'  %}" method="get">
                        <div class="product-options">
                            <label>
                                {{ form.size.label_tag }}
                                {{ form.size }}
                            </label>
                            <label>
                                {{ form.color.label_tag }}
                                {{ form.color }}
                            </label>
                        </div>

                        <div class="add-to-cart">
                            <div class="qty-label">
                                {{ form.qty.label_tag }}
                                <div class="input-number">
                                    {{ form.qty }}
                                    <span class="qty-up">+</span>
                                    <span class="qty-down">-</span>
                                </div>
                            </div>
                            <input type="hidden" name="item_id" value="{{ object.pk }}">
                            <button type="submit" class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to
                                cart
                            </button>

                        </div>
                    </form>


                    <form action="{% url 'add-to-wish' %}" method="get">
                        <div class="add-to-cart">

                            <input type="hidden" name="wish_id" value="{{ object.pk }}">
                            <button type="submit" class="add-to-cart-btn"><i class="fa fa-heart-o"></i> Add To Wish
                            </button>
                        </div>


                    </form>


                    <ul class="product-links">
                        <li>Category:</li>
                        <li><a href="#">Headphones</a></li>
                        <li><a href="#">Accessories</a></li>
                    </ul>

                    <ul class="product-links">
                        <li>Share:</li>
                        <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
                        <li><a href="#"><i class="fa fa-envelope"></i></a></li>
                    </ul>

                </div>
            </div>
            <!-- /Product details -->

            <!-- Product tab -->
            <div class="col-md-12">
                <div id="product-tab">
                    <!-- product tab nav -->
                    <ul class="tab-nav">
                        <li class="active"><a data-toggle="tab" href="#tab1">Description</a></li>
                        <li><a data-toggle="tab" href="#tab3">Reviews ({{comments.count}})</a></li>
                    </ul>
                    <!-- /product tab nav -->

                    <!-- product tab content -->
                    <div class="tab-content">
                        <!-- tab1  -->
                        <div id="tab1" class="tab-pane fade in active">
                            <div class="row">
                                <div class="col-md-12">
                                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor
                                        incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
                                        nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                                        Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
                                        fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
                                        culpa qui officia deserunt mollit anim id est laborum.</p>
                                </div>
                            </div>
                        </div>
                        <!-- /tab1  -->


                        <!-- tab3  -->
                        <div id="tab3" class="tab-pane fade in">
                            <!-- Reviews -->
                            <div class="row">

                                <!-- Reviews -->

                                <div class="col-md-9">
                                    <div id="reviews">
                                    {% for rs in comments %}

                                        <ul class="reviews">
                                            <li>
                                                <div class="review-heading">
                                                    <h5 class="name">{{rs.name}}</h5>
                                                    <p class="date">{{rs.create_at}}</p>
                                                    <div class="review-rating">
                                                        <i class="fa fa-star{% if rs.rate < 1 %}-o empty{% endif %}"></i>
                                                        <i class="fa fa-star{% if rs.rate < 2 %}-o empty{% endif %}"></i>
                                                        <i class="fa fa-star{% if rs.rate < 3 %}-o empty{% endif %}"></i>
                                                        <i class="fa fa-star{% if rs.rate < 4 %}-o empty{% endif %}"></i>
                                                        <i class="fa fa-star{% if rs.rate < 5 %}-o empty{% endif %}"></i>
                                                    </div>
                                                </div>

                                                <div class="review-body">
                                                    <p>{{rs.comment}}</p>

                                                </div>
                                            </li>
                                        </ul>
                                    {% endfor %}

                                        <nav class="mt-4">
					<ul class="pagination rounded-separated pagination-danger">
						{% if comments.has_previous %}
						<li class="page-item"><a class="page-link" href="?page={{ comments.previous_page_number }}"><i class="mdi mdi-chevron-left"></i></a></li>
						{% endif %}
						{% for num in comments.paginator.page_range %}
						{% if comments.number == num %}
						<li class="page-item active"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
						{% else %}
						<li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
						{% endif %}
						{% endfor %}
						{% if comments.has_next %}
						<li class="page-item"><a class="page-link" href="?page={{ comments.next_page_number }}"><i class="mdi mdi-chevron-right"></i></a></li>
						{% endif %}
					</ul>
				</nav>

<!--                                        <ul class="reviews-pagination">-->
<!--                                            <li class="active">1</li>-->
<!--                                            <li><a href="#">2</a></li>-->
<!--                                            <li><a href="#">3</a></li>-->
<!--                                            <li><a href="#">4</a></li>-->
<!--                                            <li><a href="#"><i class="fa fa-angle-right"></i></a></li>-->
<!--                                            {% if page_obj.has_other_pages  %}-->
<!--                                          <ul class = "pagination">-->
<!--                                              {% if page_obj.has_previous %}-->
<!--                                                    <li><a href="?page={{ page_obj.previous_page_number }}">Previous</a></li>-->
<!--                                                {% else %}-->

<!--                                                    <li class="disables"><span><<</span></li>-->
<!--                                                {% endif %}-->

<!--                                                {% for i in page_obj.paginator.page_range %}-->
<!--                                                   {% if page_obj.number == i %}-->
<!--                                              <li class="activate"><span>{{i}}<span class="sr-only">(current)</span></span></li>-->
<!--                                                {% else %}-->
<!--                                                    <li><a href="?page={{i}}">{{i}}</a></li>-->
<!--                                                {% endif %}-->
<!--                                              {% endfor %}-->
<!--                                              {% if page_obj.has_next %}-->
<!--                                              <li><a href="?page{{page_obj.next_page_number}}"> >> </a>/li>-->
<!--                                                  {% else %}-->
<!--                                                    <li class = "disabled"><span> >> </span></li>-->
<!--                                                  {% endif %}-->
<!--                                          </ul>-->
<!--                                                 {% endif %}-->

<!--                                            </div>-->
<!--                                              <div id="slick-nav-1" class="products-slick-nav"></div>-->
<!--                                            </div>-->
<!--                                        </ul>-->
                                    </div>
                                </div>

                                <!-- /Reviews -->
                                <!-- /Reviews -->

                                <!-- Review Form -->
                                <div class="col-md-3">
                                    <h4 class="text-upercase"> Write Your Review </h4>
                                    {% if messages %}
                                    {% for message in messages %}
                                    <div class="alert alert-{{message.tags}}" role="alert">
                                        {{ message }}
                                    </div>
                                    {% endfor %}
                                    {% endif %}
                                    <div id="review-form">
                                        <form class="review-form" action="/product/add-comment/{{object.id}}" method="post">
                                            {% csrf_token %}
                                            <div class="form-group">
                                                <input name="name" class="input" type="text" placeholder="Your Name"/>
                                            </div>
                                            <div class="form-group">
                                                <input name="email" class="input" type="email"
                                                       placeholder="Your Email"/>
                                            </div>
                                            <div class="form-group">
                                                <textarea name="comment" class="input"
                                                          placeholder="Your review"></textarea>
                                            </div>
                                            <div class="form-group">
                                                <div class="input-rating">
                                                    <strong class="text-uppercase">Your Rating: </strong>
                                                    <div class="stars">
                                                        <input type="radio" id="star5" name="rate" value="5"/><label
                                                            for="star5"></label>
                                                        <input type="radio" id="star4" name="rate" value="4"/><label
                                                            for="star4"></label>
                                                        <input type="radio" id="star3" name="rate" value="3"/><label
                                                            for="star3"></label>
                                                        <input type="radio" id="star2" name="rate" value="2"/><label
                                                            for="star2"></label>
                                                        <input type="radio" id="star1" name="rate" value="1"/><label
                                                            for="star1"></label>
                                                    </div>
                                                </div>
                                            </div>
                                            {% if user.id is not None %}
                                            <button class="primary-btn">Submit</button>
                                            {% else %}
                                            You must be logged in to post a review
                                            {% endif %}
                                        </form>
                                    </div>
                                </div>
                                <!-- /Review Form -->

                            </div>
                            <!-- /tab3  -->
                        </div>
                        <!-- /product tab content  -->
                    </div>
                </div>
                <!-- /product tab -->
            </div>
            <!-- /row -->
        </div>
        <!-- /container -->
    </div>
    <!-- /SECTION -->

    <!-- Section -->
    <div class="section">
        <!-- container -->
        <div class="container">
            <!-- row -->
            {% related_items object.category %}
            <!-- /row -->
        </div>
        <!-- /container -->
    </div>
    <!-- /Section -->
{% endblock content %}

